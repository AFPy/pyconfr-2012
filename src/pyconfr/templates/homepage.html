{% extends "site_base.html" %}

{% load boxes_tags %}
{% load biblion_tags %}
{% load sponsors_pro_tags %}
{% load thumbnail %}
{% load i18n %}

{% block body_class %}home{% endblock %}

{% block slogan %}
    <h2 id="slogan">{% trans 'Santa Clara, CA' %}</h2>
{% endblock %}

{% block header_extra_base %}
    <div id="python"></div>
    <div class="dates">
        <div class="sprints">
            <h4>{% trans 'Sprints: September 13th&ndash;14th' %}</h4>
        </div>
        <div class="talks">
            <h4>{% trans 'Talks: September 15th&ndash;17th' %}</h4>
        </div>
    </div>
    {% sponsors header as header_sponsors %}
    <div class="diamond-sponsors">
        <span>{% trans 'Presented by' %}</span>
        {% for sponsor in header_sponsors reversed %}

        <a href="{% url sponsor_list %}">
            {% thumbnail sponsor.website_logo "130" format="PNG" as logo %}
                <img src="{{ logo.url }}" alt="{{ sponsor.name }}" />
            {% endthumbnail %}
        </a>
        {% endfor %}
    </div>
{% endblock %}

{% block body %}

    {% sponsors as sponsors %}
    <div class="mainbox">
        {% box "mainbox" %}
    </div>
    {#  SECTION: our platinum and gold sponsors #}
    <div class="span-24 last">
        <h1 class="hidden">{% trans 'Our Platinum and Gold Sponsors' %}</h1>
        {% include "_sponsors.html" %}
        <p class="spacer learn-more"><a href="{% url sponsor_info %}">{% trans 'Learn how to become a sponsor...' %}</a></p>
    </div>
    {#  SECTION: what is pycon #}
    <div class="span-8">
        <h1 class="section-title">{% trans 'What is <span>PyCon</span>?' %}</h1>
    </div>
    <div class="span-16 last spacer">
        {% box "homepage_main" %}
        <p class="learn-more"><a href="{% url wakawaka_page 'about' %}">{% trans 'Learn more...' %}</a></p>
    </div>
    {#  SECTION: blog #}
    <div class="span-8">
        <h1 class="section-title"><span>{% trans 'Announcements' %}</span></h1>
    </div>
    <div class="span-16 last spacer">
        {% latest_blog_posts as posts %}
        {% if posts %}
            {% for post in posts %}
                <div class="blog-post">
                    <h2>{{ post.title }}</h2>
                    {% include "biblion/dateline.html" %}
                    <div class="teaser">{{ post.teaser_html|safe }}</div>
                </div>
            {% endfor %}
        {% else %}
            <p>{% trans 'No blog posts have been published.' %}</p>
        {% endif %}
    </div>
    {#  SECTION: silver and media sponsors #}
    <div class="span-24 last">
        <hr />
        <div class="other-sponsors">
            <h6>{% trans 'Sponsors' %}</h6>
            <a href="{% url sponsor_list %}">
            {% for sponsor in sponsors %}
                {% thumbnail sponsor.website_logo "100x60" format="PNG" as logo %}
                    <span><img src="{{ logo.url }}" style="margin:{{ logo|margin:"100x60" }}" alt="{{ sponsor.name }}" width="{{ logo.x }}" height="{{ logo.y }}" /></span>
                {% endthumbnail %}
            {% endfor %}
            </a>
        </div>
    </div>
{% endblock %}

{% block extra_body %}
    {% if sponsors|length > 6 %}
        <script src="{{ STATIC_URL }}js/jquery.cycle.all.js" type="text/javascript"></script>
        <script>
            $(function(){
                $('#slider li:first').fadeIn(1000, function() {
                    $('#slider').cycle({ pager: '#slider-nav', timeout: 7000 });
                });
            });
        </script>
    {% endif %}
{% endblock %}
